<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Redirecting...</title>
  <script>
    // Only handle /spaces/* routes, let others go to root
    const path = window.location.pathname;
    const search = window.location.search;
    const hash = window.location.hash;

    if (path.startsWith('/spaces/') || path === '/spaces') {
      sessionStorage.setItem('redirect_path', path + search + hash);
      window.location.replace('/spaces/');
    } else if (path.startsWith('/tunes/') || path === '/tunes') {
      // Preserve subpath via hash for SPA routing
      const subpath = path.replace('/tunes', '').replace(/^\//, '');
      const hashPath = subpath ? '#/' + subpath : hash;
      window.location.replace('/tunes/' + search + hashPath);
    } else {
      // For other 404s, go to root
      window.location.replace('/');
    }
  </script>
</head>
<body>
  Redirecting...
</body>
</html>
